<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Bash script 快速入门指南（译） | XiaochenCui_Blog | 千里之行 始于足下</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="theme-color" content="#3F51B5">
  
  
  <meta name="keywords" content="bash script">
  <meta name="description" content="原文地址： bash-tute">
<meta property="og:type" content="article">
<meta property="og:title" content="Bash script 快速入门指南（译）">
<meta property="og:url" content="http://www.cuixiaochen.com/2016/06/15/Bash-script-快速入门指南（译）/index.html">
<meta property="og:site_name" content="XiaochenCui_Blog">
<meta property="og:description" content="原文地址： bash-tute">
<meta property="og:updated_time" content="2017-04-04T08:56:57.227Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bash script 快速入门指南（译）">
<meta name="twitter:description" content="原文地址： bash-tute">
  
    <link rel="alternative" href="/atom.xml" title="XiaochenCui_Blog" type="application/atom+xml">
  
  <meta name="summary" content="&lt;p&gt;原文地址： &lt;a href=&quot;http://www.panix.com/~elflord/unix/bash-tute.html&quot;&gt;bash-tute&lt;/a&gt; &lt;/p&gt;">
  <link rel="shortcut icon" href="/img/home.png">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="loading" class="active"></div>

  <nav id="menu" class="hide" >
   <div class="inner flex-row-vertical">
  <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
      <i class="icon icon-lg icon-close"></i>
  </a>
  <div class="brand-wrap">
    <div class="brand">
      <a href="/" class="avatar"><img src="/img/lego1.jpg"></a>
      <hgroup class="introduce">
        <h5 class="nickname">Xiaochen Cui</h5>
        <a href="mailto:jcnlcxc@163.com" title="jcnlcxc@163.com" class="mail">jcnlcxc@163.com</a>
      </hgroup>
    </div>
  </div>
  <div class="scroll-wrap flex-col">
    <ul class="nav">
      
          <li class="waves-block waves-effect">
            <a href="/"  >
              <i class="icon icon-lg icon-home"></i>
              主页
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="/archives"  >
              <i class="icon icon-lg icon-archives"></i>
              文章
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="/tags"  >
              <i class="icon icon-lg icon-tags"></i>
              标签
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="https://github.com/XiaochenCui" target="_blank" >
              <i class="icon icon-lg icon-github"></i>
              Github
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="http://www.cnblogs.com/cuixiaochen/" target="_blank" >
              <i class="icon icon-lg icon-book"></i>
              旧博客
            </a>
          </li>
      
          <li class="waves-block waves-effect">
            <a href="/aboutme"  >
              <i class="icon icon-lg icon-tree"></i>
              关于我
            </a>
          </li>
      
    </ul>

    <footer class="footer">
  <p><a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;vertical-align:middle;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAMAAABEF7i9AAAAllBMVEUAAAD///+rsapERER3d3eIiIjMzMzu7u4iIiKUmZO6v7rKzsoODg4RERFVVVUNDQ0NDg0PEA8zMzNLTEtbXltmZmZydnF9gn2AgICPkI+ZmZmqqqq7u7vFxsXIzMgNDQwZGRkgICAhISEkJSMnKCcuMC4xMzE5Ozk7PTtBQkFCQkJDQ0Nna2eGhoaHh4ezuLLGysbd3d1wVGpAAAAA4UlEQVR42q2T1xqCMAyFk7QsBQeKA9x7j/d/OSm22CpX0nzcpA1/T05aAOuBVkMAScQFHLnEwoCo2f1TnQIGoVMewjZEjVFN4GH1Ue1Cn2jWqwfsOOj6wDwGvotsl/c8lv7KIq1eLOsT0HMFHMIE/RZyHnlphryT9zyV+8WH5e8yQw3wnQvgAFxPTKUVi555SHR/lOfLMgVTeDlSfN+TaoUsiTyeIm+bCkHvCA2FUKG48LDtYBZBknsYP/G8NTw0gaaHyuQf4H5pecrB/FYCT2sL9zAfy1Xyjou6L8X2W7YcLyBZCRtnq/zfAAAAAElFTkSuQmCC" /></a></p>
  <p>XiaochenCui_Blog &copy; 2017</p>
  <p>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
  <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></p>
  <a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-2x icon-rss-square"></i></a>
</footer>

  </div>
</div>

  </nav>
  <main id="main">
    <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Bash script 快速入门指南（译）</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input " autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-share">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header">
  <div class="container">
    <h1 class="author">Bash script 快速入门指南（译）</h1>
    <h5 class="subtitle">
        
            <time datetime="2016-06-15T03:04:28.000Z" itemprop="datePublished" class="page-time">
  2016-06-15
</time>


        
    </h5>
  </div>
</header>

    <div class="container body-wrap">
      <article id="post-Bash-script-快速入门指南（译）" 
  class="article article-type-post" itemprop="blogPost">
    <div class="post-meta flex-row">
        
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bash-script/">bash script</a></li></ul>

    </div>
    <div class="post-body">
        <aside class="post-widget" id="post-widget">

            
            <div class="post-share" id="post-share">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>

            

            
            <nav class="post-toc-wrap" id="post-toc">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#使用-Bash-shell-编写脚本-script-的入门指南"><span class="post-toc-text">使用 Bash shell 编写脚本(script)的入门指南</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#一个简单的-shell-script"><span class="post-toc-text">一个简单的 shell script</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#一个简单的例子"><span class="post-toc-text">一个简单的例子</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#变量"><span class="post-toc-text">变量</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#单引号-VS-双引号"><span class="post-toc-text">单引号 VS 双引号</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用引号保护你的变量"><span class="post-toc-text">使用引号保护你的变量</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#变量在运行时会被展开"><span class="post-toc-text">变量在运行时会被展开</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用大括号保护你的变量"><span class="post-toc-text">使用大括号保护你的变量</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#条件语句，if-then-elif"><span class="post-toc-text">条件语句，if/then/elif</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Test指令与操作"><span class="post-toc-text">Test指令与操作</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#一些需要注意的地方"><span class="post-toc-text">一些需要注意的地方</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#test操作符的简短总结"><span class="post-toc-text">test操作符的简短总结</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#循环"><span class="post-toc-text">循环</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#for-循环"><span class="post-toc-text">for 循环</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#for循环中的通配符"><span class="post-toc-text">for循环中的通配符</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#while循环"><span class="post-toc-text">while循环</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#指令替换"><span class="post-toc-text">指令替换</span></a></li></ol></li></ol>
            </nav>
            
        </aside>

        <div class="post-main">

            <div class="post-content" id="post-content" itemprop="postContent">
            <p>原文地址： <a href="http://www.panix.com/~elflord/unix/bash-tute.html" target="_blank" rel="external">bash-tute</a> </p>
<a id="more"></a>
<h1 id="使用-Bash-shell-编写脚本-script-的入门指南"><a href="#使用-Bash-shell-编写脚本-script-的入门指南" class="headerlink" title="使用 Bash shell 编写脚本(script)的入门指南"></a>使用 Bash shell 编写脚本(script)的入门指南</h1><h2 id="一个简单的-shell-script"><a href="#一个简单的-shell-script" class="headerlink" title="一个简单的 shell script"></a>一个简单的 shell script</h2><p>一个 shell script 不只是将多个指令简单地排列在一起并运行。一般来说，shell script 应该在第一行作如下声明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div></pre></td></tr></table></figure>
<p>这行声明会指定 script 运行在 bash shell 中，而不管用户当前使用的是哪一种交互式 shell 。不同的shell语法差异很大，所以这行声明非常重要。</p>
<h3 id="一个简单的例子"><a href="#一个简单的例子" class="headerlink" title="一个简单的例子"></a>一个简单的例子</h3><p>以下是一个简单的shell script例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo &quot;hello, $USER. I wish to list some files of yours&quot;</div><div class="line">echo &quot;listing files in the current directory, $PWD&quot;</div><div class="line">ls  # list files</div></pre></td></tr></table></figure>
<p>首先，注意第４行。在一个bash script中，跟在符号#后面的被视作注释（除了第一行的shell声明），shell 将会忽略注释。注释的作用是帮助人们阅读script。</p>
<p>\$USER 和 \$PWD 是<strong>变量</strong>。这两个变量属于被shell预定义的标准变量，他们不需要在script中特别定义。如果变量名在双引号内部，这个变量将会被被<strong>展开</strong>。展开表示shell将会先用变量的值替换变量，然后再执行指令。</p>
<p>接下来我们会详细讨论变量。</p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>所有编程语言都需要变量。定义变量的方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">X=&quot;hello&quot;</div></pre></td></tr></table></figure>
<p>引用变量的方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$X</div></pre></td></tr></table></figure>
<p>$X表示的是变量X的值。在语法上要注意以下几点：</p>
<ul>
<li>符号 = 两边不能有空格。这样写是错误的：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">X = hello</div></pre></td></tr></table></figure>
<ul>
<li>双引号并不是必需的，但当变量的值中包含空格时，就必须加双引号，如：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">X=hello world # 错误</div><div class="line">X=&quot;hello world&quot; # 正确</div></pre></td></tr></table></figure>
<p>这是因为shell会把命令行解析为一堆命令以及被空格分隔的命令参数。foo=baris 被解析为一个命令。但foo = bar会被错误地解析，foo因为被空格分隔导致它被解析成了一个单独的命令。同理，X=hello world也是错误的。</p>
<h2 id="单引号-VS-双引号"><a href="#单引号-VS-双引号" class="headerlink" title="单引号 VS 双引号"></a>单引号 VS 双引号</h2><p>一般情况下，将变量名包在双引号里可以使变量展开。单引号则不会展开变量。</p>
<p>例子</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo -n &apos;$USER=&apos; # -n option stops echo from breaking the line</div><div class="line">echo &quot;$USER&quot;</div><div class="line">echo &quot;\$USER=$USER&quot;  # this does the same thing as the first two lines</div></pre></td></tr></table></figure>
<p>输出结果如下（假设你的用户名是elford）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$USER=elflord</div><div class="line">$USER=elflord</div></pre></td></tr></table></figure>
<p>综上，双引号更灵活，单引号更直观。所以，当两种引号都可以用的时候优先选择单引号。</p>
<h3 id="使用引号保护你的变量"><a href="#使用引号保护你的变量" class="headerlink" title="使用引号保护你的变量"></a>使用引号保护你的变量</h3><p>用引号保护变量很管用。当变量中包含空格或者变量是一个空的字符串时，更需要用引号保护变量。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">X=&quot;&quot;</div><div class="line">if [ -n $X ]; then 	# -n tests to see if the argument is non empty</div><div class="line">	echo &quot;the variable X is not the empty string&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">the variable X is not the empty string # 错误</div></pre></td></tr></table></figure>
<p>这里出现的结果不符合预期是因为shell把$X展开成了空字符串，所以表达式[-n]返回true(此时-n没有参数，返回true)。正确的script应该这样写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">X=&quot;&quot;</div><div class="line">if [ -n &quot;$X&quot; ]; then 	# -n tests to see if the argument is non empty</div><div class="line">	echo &quot;the variable X is not the empty string&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>在这个例子中，表达式被展开为[ -n “” ]，并返回false。因为-n被给予参数””(空字符串)。</p>
<h3 id="变量在运行时会被展开"><a href="#变量在运行时会被展开" class="headerlink" title="变量在运行时会被展开"></a>变量在运行时会被展开</h3><p>下面这个例子可以证明shell确实“展开”了变量（就像前文提到的一样）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">LS=&quot;ls&quot;</div><div class="line">LS_FLAGS=&quot;-al&quot;</div><div class="line"></div><div class="line">$LS $LS_FLAGS $HOME</div></pre></td></tr></table></figure>
<p>这个script的最后一行实际上执行了下面这个指令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls -al /home/elflord # （假设你的home目录在/home/elford）</div></pre></td></tr></table></figure>
<p>这个script的机制是：shell将变量替换为变量的值，然后执行指令。</p>
<h3 id="使用大括号保护你的变量"><a href="#使用大括号保护你的变量" class="headerlink" title="使用大括号保护你的变量"></a>使用大括号保护你的变量</h3><p>假设你想输出变量X的值，然后紧接着输出字母”abc”。那么应该如何做？先试一下这样写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">X=ABC</div><div class="line">echo &quot;$Xabc&quot;</div></pre></td></tr></table></figure>
<p>输出为空，因为shell认为我们在请求变量Xabc，而变量Xabc并未被定义。解决的办法是用大括号将变量X与其它字母隔开：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">X=ABC</div><div class="line">echo &quot;$&#123;X&#125;abc&quot;</div></pre></td></tr></table></figure>
<h2 id="条件语句，if-then-elif"><a href="#条件语句，if-then-elif" class="headerlink" title="条件语句，if/then/elif"></a>条件语句，if/then/elif</h2><p>条件语句if…的语法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">if condition</div><div class="line">then</div><div class="line">	statement1</div><div class="line">	statement2</div><div class="line">	..........</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>if…else…的语法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">if condition</div><div class="line">then</div><div class="line">	statement1</div><div class="line">	statement2</div><div class="line">	..........</div><div class="line">else</div><div class="line">	statement3</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>此外，你还可以在if后面使用多个elif：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">if condition1</div><div class="line">then</div><div class="line">	statement1</div><div class="line">	statement2</div><div class="line">	..........</div><div class="line">elif condition2</div><div class="line">then</div><div class="line">	statement3</div><div class="line">	statement4</div><div class="line">	........    </div><div class="line">elif condition3</div><div class="line">then</div><div class="line">	statement5</div><div class="line">	statement6</div><div class="line">	........    </div><div class="line">	</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>在实际使用中，任何指令都可以作为分支判断条件。当指令返回值为０时（也就是说指令运行的结果为成功），相应代码块中的指令就会开始执行。<br>在本文中，我们只使用”test”或”[ ]”执行判断。</p>
<h3 id="Test指令与操作"><a href="#Test指令与操作" class="headerlink" title="Test指令与操作"></a>Test指令与操作</h3><p>判断条件中的指令大多数时候都是test指令。Test根据各操作的成功或失败来返回真或假（更准确地说，以０或非０状态退出），例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">test operand1 operator operand2</div></pre></td></tr></table></figure>
<p>如果在test中只需要一个操作数，那么test指令可以简写为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[ operand1 operator operand2 ]</div></pre></td></tr></table></figure>
<p>用法实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">X=3</div><div class="line">Y=4</div><div class="line">empty_string=&quot;&quot;</div><div class="line">if [ $X -lt $Y ]	# is $X less than $Y ? </div><div class="line">then</div><div class="line">	echo &quot;\$X=$&#123;X&#125;, which is smaller than \$Y=$&#123;Y&#125;&quot;</div><div class="line">fi</div><div class="line"></div><div class="line">if [ -n &quot;$empty_string&quot; ]; then</div><div class="line">	echo &quot;empty string is non_empty&quot;</div><div class="line">fi</div><div class="line"></div><div class="line">if [ -e &quot;$&#123;HOME&#125;/.fvwmrc&quot; ]; then 			# 测试 ~/.fvwmrc 是否存在</div><div class="line">	echo &quot;you have a .fvwmrc file&quot;</div><div class="line">	if [ -L &quot;$&#123;HOME&#125;/.fvwmrc&quot; ]; then 		# 测试 ~/.fvwmrc 是否是符号链接(symbolic link)</div><div class="line">		echo &quot;it&apos;s a symbolic link</div><div class="line">	elif [ -f &quot;$&#123;HOME&#125;/.fvwmrc&quot; ]; then 	# 测试 ~/.fvwmrc 是否是常规文件(regular file)</div><div class="line">		echo &quot;it&apos;s a regular file&quot;</div><div class="line">	fi</div><div class="line">else</div><div class="line">	echo &quot;you have no .fvwmrc file&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
<h3 id="一些需要注意的地方"><a href="#一些需要注意的地方" class="headerlink" title="一些需要注意的地方"></a>一些需要注意的地方</h3><p>test指令的正确格式是“操作数&lt;空格&gt;操作符&lt;空格&gt;操作数”或者“操作符&lt;空格&gt;操作数”，空格是必需的。如果第一个连续字符串以’-‘开头，它会被解析为操作符，否则被解析为操作数。例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if [ 1=2 ]; then </div><div class="line">	echo &quot;hello&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>将会输出hello，因为shell找到了一个操作数，但没有找到任何操作符。</p>
<p>另一个需要注意的是引号，不用引号保护变量有可能造成bug。如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">X=&quot;-n&quot;</div><div class="line">Y=&quot;&quot;</div><div class="line">if [ $X = $Y ] ; then</div><div class="line">	echo &quot;X=Y&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>这个script不会输出预期的结果，因为shell将表达式展开为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[ -n = ]</div></pre></td></tr></table></figure>
<p>然而字符串”=”的长度不为０。</p>
<h3 id="test操作符的简短总结"><a href="#test操作符的简短总结" class="headerlink" title="test操作符的简短总结"></a>test操作符的简短总结</h3><p>常用的test操作符：</p>
<table>
<thead>
<tr>
<th style="text-align:center">操作符</th>
<th>返回值为真的情况</th>
<th style="text-align:center">操作数的个数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-n</td>
<td>操作数不为０（或长度不为０）</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">-z</td>
<td>操作数为０（或长度为０）</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">-d</td>
<td>操作的目录存在</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">-f</td>
<td>操作的文件存在</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">-eq</td>
<td>两个操作数为整数且相等</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">-neq</td>
<td>两个操作数为整数且不相等</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">=</td>
<td>两个操作数相等（可比较字符串）</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">!=</td>
<td>两个操作数不相等（可比较字符串）</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">-lt</td>
<td>操作数１小于操作数２（且都为整数）</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">-gt</td>
<td>操作数１大于操作数２（且都为整数）</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">-ge</td>
<td>操作数１大于等于操作数２（且都为整数）</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">-le</td>
<td>操作数１小于等于操作数２（且都为整数）</td>
<td style="text-align:center">2</td>
</tr>
</tbody>
</table>
<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><p>在bash中，循环分为两种：</p>
<ul>
<li>for循环</li>
<li>while循环</li>
</ul>
<h3 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h3><p>for 循环用法实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">for X in red green blue</div><div class="line">do</div><div class="line">	echo $X</div><div class="line">done</div></pre></td></tr></table></figure>
<p>for循环会遍历用空格分隔的各项（如果单项里面包含空格，则需要用引号保护这一项）。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">colour1=&quot;red&quot;</div><div class="line">colour2=&quot;light blue&quot;</div><div class="line">colour3=&quot;dark green&quot;</div><div class="line">for X in &quot;$colour1&quot; $colour2&quot; $colour3&quot;</div><div class="line">do</div><div class="line">	echo $X</div><div class="line">done</div></pre></td></tr></table></figure>
<p>当不确定遍历的项中是否包含空格时，用引号保护它。</p>
<h3 id="for循环中的通配符"><a href="#for循环中的通配符" class="headerlink" title="for循环中的通配符"></a>for循环中的通配符</h3><p>符号 * 可以匹配任意字符串。如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo *</div></pre></td></tr></table></figure>
<p>会输出当前目录下的所有文件和文件夹。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo *.jpg</div></pre></td></tr></table></figure>
<p>会输出所有jpeg文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo $&#123;HOME&#125;/public_html/*.jpg</div></pre></td></tr></table></figure>
<p>会输出public_html目录下的所有jpeg文件。</p>
<p>如上所示，* 通配符在操作文件时十分管用，尤其是用在for循环中，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">for X in *.html</div><div class="line">do</div><div class="line">		grep -L &apos;&lt;UL&gt;&apos; &quot;$X&quot;                     # 通过正则匹配查找目录下所有html文件中的ul标签</div><div class="line">done</div></pre></td></tr></table></figure>
<h3 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h3><p>while循环在条件判断为真时执行内部代码块，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">X=0</div><div class="line">while [ $X -le 20 ]</div><div class="line">do</div><div class="line">	echo $X</div><div class="line">	X=$((X+1))</div><div class="line">done</div></pre></td></tr></table></figure>
<p>bash不允许C语言风格的for循环：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">for (X=1,X&lt;10; X++)</div></pre></td></tr></table></figure>
<p>不允许for循环的其中一个原因是：bash是一种解释型语言，所以它的执行效率很低，正因如此，重型循环(heavy iteration)不被允许。</p>
<h2 id="指令替换"><a href="#指令替换" class="headerlink" title="指令替换"></a>指令替换</h2><p>在bash中，指令替换是一个很有用的功能，它帮助你使用某条指令的输出去执行另一条指令。例如：把一条指令的输出设为变量X的值。</p>
<p>指令替换有两种方式：</p>
<ul>
<li>括号展开</li>
<li>反引号展开(``)</li>
</ul>
<p>括号展开的格式为：$(commands) ，它将会被展开为commands的输出。括号展开允许嵌套，所以commands中可以包含括号展开。</p>
<p>反引号展开则将 <code>commands</code> 展开为 commands 的输出。</p>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">files=&quot;$(ls)&quot;</div><div class="line">web_files=`ls public_html`</div><div class="line">echo &quot;$files&quot;      # 用双引号保护内部的空格</div><div class="line">echo &quot;$web_files&quot;  # 用双引号保护内部的空格</div><div class="line">X=`expr 3 \* 2 + 4` # 利用 expr 进行运算</div><div class="line">echo &quot;$X&quot;</div></pre></td></tr></table></figure>
<p>括号展开的优势在于容易嵌套。而且大多数 bourne shell 的变种都支持括号展开 （如：POSIX）。然而反引号展开的可读性更强，而且最基础的 shell 都能支持它（如：#!/bin/sh 的所有版本）</p>
<p>注：上例中echo表达式中的字符串必须用引号保护。</p>

            <blockquote>
                <p>
                本文地址：
                <a href="http://www.cuixiaochen.com/2016/06/15/Bash-script-快速入门指南（译）/" target="_blank" rel="external">http://www.cuixiaochen.com/2016/06/15/Bash-script-快速入门指南（译）/</a>
                </p>
                <footer><cite><a href="http://www.cuixiaochen.com">@XiaochenCui_Blog</a></cite></footer>
            </blockquote>
            </div>
            
<nav class="post-nav">
  
    <div class="waves-block waves-effect prev fl">
      <a href="/2016/07/03/Bash-script-笔记（一）/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Bash script 笔记（一）</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next fr">
      <a href="/2016/05/20/Mongodb-常见报错及解决方案/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Mongodb 常见报错及解决方案</h4>
      </a>
    </div>
  
</nav>


            
            


<section id="comments">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'cuixiaochen'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


        </div>
    </div>
</article>
    </div>
  </main>
<div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>

<script>
var BLOG_SHARE = {
    title: "Bash script 快速入门指南（译）",
    pic: "/img/lego1.jpg",
    summary: document.getElementsByName('summary')[0].content,
    url: "http://www.cuixiaochen.com/2016/06/15/Bash-script-快速入门指南（译）/index.html"
};
</script>
<div class="global-share" id="global-share">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>



<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script src="/js/main.js"></script>



<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<script type="text/template" id="search-tpl">
<li class="item">
    <a href="/{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</script>

<script src="/js/search.js"></script>







<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-82276339-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



</body>
</html>
